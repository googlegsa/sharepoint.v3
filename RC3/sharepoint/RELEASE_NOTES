Release Notes:
===============

Google Search Appliance Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007

This document contains the release notes for Google Search Appliance Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007.
The following sections describe the release in detail and provide information that supplements the main documentation.
See the Issues Tab on the Code Site for the current list of known issues and workarounds.

Web Site: http://code.google.com/p/google-enterprise-connector-sharepoint/issues/list


Release 2.4.0 Build3, 25 November, 2009
=======================================

Introduction
------------
This is an upgrade release with some enhancements and bug fixes. Users of previous releases are encouraged to upgrade.
Users of previous releases should check the "Version Compatibility" section below for instructions on how to use existing data with this new release.

Summary of Changes
------------------
New features:
---------------
1) Support for Kerberos Authentication at crawl time

Issues fixed from last release:
---------------------------------
Issue 74 - Support traversal by Kerberos authentication.
Issue 85 - The discovery of site collection should be initiated in the first crawl cycle even though no content is crawled.
Issue 87 - Connector should canonicalize the URLs for child entities before applying include/exclude patterns.
Issue 90 - The time at which connector completes a crawl cycle should be logged in state file.
Issue 101 - Sending metadata to GSA when doc size > 30M.
Issue 102 - Liststate entry is deleted from the connector state without checking if the list is deleted.
Issue 106 - Connector should not remove/delete documents from its queue unless checkPoint() is called.
Issue 110 - Connector is not editable when password has ampersand (&) character. Connector configuration page throws XML error.
Issue 116 - Return batchHint or little more docs from start/resumeTraversal and not 2* batchHint.
Issue 118 - All the extra IDs (URLs in case of attachments) which are used during the consrtruction of delete feeds are updated before checkpoint
Issue 120 - Use file level custom logging instead of event-log based logging

Version Compatibility
---------------------
This version works with Connector Manager version 2.4.0 and above.
Versions lower than 2.4.0 of the Connector Manager will not work correctly with this version of the connector.


Known Issues/Limitations
------------------------
1) Issue 50: Connector does not crawl a SharePoint entity if it contains an invalid XML character in its metadata.
   -- With 2.0 release, the connector used to recrawl all documents from the SharePoint list which has documents with
      invalid XML character in its metadata. With 2.4 release the connector will not crawl any new documents from the
      list unless the document is removed from the SharePoint list OR the metadata is corrected
      Workaround:
      Remove the problematic document from the SharePoint list OR the remove the invalid characters from metadata

2) Issue 59: The following exception occurs intermittently on some machines where the local ports are not released properly after being used.
   java.net.BindException: Address already in use: JVM_Bind
   Workaround: Stop the connector and restart it after some time to avoid this issue.

3) Issue 70: Connector configuration is saved for invalid domain name when the authentication scheme for SharePoint site is NTLM and
   the credentials used are of a local machine user.

4) Issue 108: Connector is unable to traverse the repository upon restart if the state file is very large
   -- If the size of the state file is >= 100 MB, then connector fails to load the state file due to insufficient memory. An
      OutOfMemory Error is thrown while parsing the state XML.
      Workaround:
      Increase the memory allocated to tomcat so that enough memory is available for parsing the state XML.
      To increase the memory allocated to the connector follow the steps given below:
	  This change will allocate 2GB (i.e. 2048MB) of memory.
	   LINUX
	   ======
	   Open the file: <Connector Installation Path>/<Connector Name>/Tomcat/bin/catalina.sh
	   Search for: JAVA_OPTS="$JAVA_OPTS -Xms256m -Xmx1024m
	   Change it to: JAVA_OPTS="$JAVA_OPTS -Xms256m -Xmx2048m

	   WINDOWS
	   ========
	   Open the file: <Connector Installation Path>\<Connector Name>\Tomcat\bin\service.bat
	   Search for (must be towards the end of the file) :  --JvmMs 256 --JvmMx 1024
	   Change it to:  --JvmMs 256 --JvmMx 2048

	   Note: To be able to allocate memory successfully, the system must have at least twice
	   as much physical memory.

5) Issue 113: Connector fails to detect changes if there is a huge gap in the activity on the SharePoint Server, goes into an infinite loop
   -- This is the case when the SharePoint's Change log is reset OR the change tokens maintained by connector are no longer maintained
      by SharePoint's Change log. In such cases the connector logs as WARNING message. The connector will have to be reset and crawl
      and index all content once more
      Workaround: Re-crawl all content by resetting the conenctor

6) In this release, following features are supported only on SharePoint 2007
   - Fix for issue#53 (Connector should support SharePoint farm )
   - Bulk Authorization by connector

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Release 2.0.2, Sep 02, 2009
==========================

Introduction
------------
This is a maintenance release that improves quality, reliability, and performance without adding any new functionality.
All users of previous 2.0.0 release should upgrade to this release


Summary of Changes
------------------

Issues fixed from last release:
---------------------------------
Issue 102: Liststate entry is deleted from the connector state without checking if the list is deleted

Version Compatibility
---------------------
Connectors created with 2.0.0 version of the connector will work with this version. This version works with Connector Manager version 2.0.0.
Earlier versions of the Connector Manager will not work correctly with this version of the connector.

Known Issues/Limitations
------------------------
1) Issue 50: Connector does not crawl a SharePoint entity if it contains an invalid XML character in its metadata.
2) In this release, following features are supported only on SharePoint 2007
   - Fix for issue#53 (Connector should support SharePoint farm )
   - Bulk Authorization by connector
3) Issue#70: Connector configuration is saved for invalid domain name when the authentication scheme for SharePoint site is NTLM and the credentials
used are of a local machine user.

STEPS TO DEPLOY THE PATCH RELEASE ON 2.0.0
===========================================
1. Stop the SharePoint Connector Service.
2. Extract the downloaded connector-sharepoint-2.0.2.zip at some location on your machine.
3. Open the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/lib.
4. Replace the file "connector-sharepoint.jar" with the new jar found in the extracted connector-sharepoint-2.0.2 folder.
   If you want to back-up the older jar file, please back-it up to a folder other than the Tomcat folder. Leaving a back-up in the same directory can create issues.
5. Start the SharePoint Connector Service.

Note: $CATALINA_HOME stands for the folder where the connector's Tomcat is deployed. It is usually :
C:\Program Files\GoogleConnectors\<%Installation name%>\Tomcat

-----------------------------------------------------------------------------------------------------------------------------------------------
Release 2.0.0, June 22, 2009
==========================

Introduction
------------
This is a major release with new features. Users of previous releases should check the "Version Compatibility" section below for instructions on how to use existing data with this new release.


Summary of Changes
------------------
New features:
---------------
1) Support for selecting the authorization mode: Google Search Appliance/SAML provider OR by the connector
2) Per site version detection which allows multiple sites of different SharePoint versions to be crawled using a single connector instance
3) Discovering multiple site collection from a SharePoint farm installation
4) Support for various security templates of NTLM V2
5) Improved metadata control and indexing
6) Improved Site Alias Mapping support

Issues fixed from last release:
---------------------------------
Issue 21: Can we combine alias host & port?
Issue 43: Detect SharePoint Server version from Crawl URL
Issue 51: Connector does not validate the URL patterns for MySite URL
Issue 52: Connector accepts crawl URL with repeated slashes
Issue 53: connector should support SharePoint farm
Issue 54: Does the connector configuration UI work in Chrome?
Issue 55: The custom metadata fetched by the connector contains ows_ as its prefix.
Issue 56: Connector accepts username in format user@domain for user when SharePoint site mentioned under crawl URL is a HTTP basic protected site
Issue 63: Connector does not support the various strict Windows security templates that come up with NTLM Version 2.
Issue 64: Log excluded URLs in a separate file
Issue 65: Metadata values not fully-indexed (values originating from the ows_MetaInfo state-bag field)
Issue 67: Error message should be shown to indicate that the prefix is incorrect for includeURLs and excludeURLs
Issue 68: Connector does not detect renamed folders and send feeds for the same
Issue 69: NullPointerException seen in logs when SharePoint version is selected as 2007 and Crawl URL is of SPS 2003 while configuring the connector instance.
Issue 71: The connector configuration form should be XHTML compliant.


Version Compatibility
---------------------
Connectors created with earlier versions of the connector will not work with this version. This version works with Connector Manager version 2.0.0. Earlier versions of the Connector Manager will not work correctly with this version of the connector.

Known Issues/Limitations
------------------------
1) Issue 50: Connector does not crawl a SharePoint entity if it contains an invalid XML character in its metadata.
2) In this release, following features are supported only on SharePoint 2007
   - Fix for issue#53 (Connector should support SharePoint farm )
   - Bulk Authorization by connector
3) Issue#59: The following exception occurs intermittently on some machines where the local ports are not released properly after being used.
   java.net.BindException: Address already in use: JVM_Bind
   Workaround: Stop the connector and restart it after some time to avoid this issue.
4) Issue#70: Connector configuration is saved for invalid domain name when the authentication scheme for SharePoint site is NTLM and the credentials used are of a local machine
-----------------------------------------------------------------------------------------------------------------------------------------------
Release 1.3.2, April 10, 2009
=============================

INTRODUCTION
=============
This is a maintenance release that improves quality, reliability, and performance without adding any new functionality. All users of previous 1.3.x releases should upgrade to this release. See the product website for a complete description.

Version compatibility
=============================

This connector release is compatible with Connector Manager v1.3.2 and above. Earlier versions of the Connector Manager will not work correctly with this version of the connector.
It is suggested that customers using SharePoint Connector versions 1.0.0 through 1.3.0 and considering upgrading 1.3.2  should do a clean install of Connector Manager v1.3.2 and then install Google SharePoint Connector v1.3.2. This product is designed to function with Microsoft SharePoint 2003, SharePoint 2007, WSS 2.0, WSS 3.0


ISSUES FIXED IN THIS RELEASE:
=============================
- Issue 63: Connector does not support the various strict Windows security templates that come up with NTLM Version 2.
- Issue 71: The connector configuration form should be XHTML compliant. Because of certain JavaScript dependecies introduced in this fix, this connector version will not support connector manager versions prior to 1.3.2.


KNOWN ISSUES/LIMITATIONS:
=========================
Issue 51: Connector does not validate MySite against included/excluded URL patterns and connectivity on the connector configuration page.
Issue 52: Crawl URL specified on the connector configuration page is not validated if it contains repeated slashes.
Issue 69: NullPointerException seen in logs when SharePoint version is selected as 2007 and Crawl URL is of SPS 2003 while configuring the connector instance.
Issue 70: Connector configuration is saved for invalid domain name when the authentication scheme is HTTP Basic and the credentials used are of a local machine user.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Release 1.2.2, SEPT 10, 2008
=============================

INTRODUCTION
=============
This is a patch release for wide evaluation and usage.
This patch can be deployed on the existing installation of Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 as per steps mentioned below.
Your feedback is important to us. Keep in mind that we are continuing to work on Google Enterprise Connector 1.2.2 for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
===========================
-Issue#23: Improve sharepoint connector logging
-Issue#47: Clean up state files on startTraversal
-Issue#48: Send site name as meta data
-Fix for connector to allow crawling of Sharepoint List/Library containing large number of items (e.g. more than 2000)

STEPS TO DEPLOY THE PATCH RELEASE ON 1.2.1
=========================================
1. Stop the SharePoint Connector Service.
2. Open the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/lib.
3. Replace the file "connector-sharepoint.jar" with the new jar downloaded from the Code Site.
4. Delete the SharePoint connector state file (Sharepoint_state.xml) from the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/connectors/sharepoint-connector/<connector-name>
5. Start the SharePoint Connector Service.
-------------------------------------------------------------------------------------------------------------------------

Release 1.2.1, JULY 2, 2008
=============================

Introduction
------------
This is an early access release for wide evaluation and usage.  Your
feedback is important to us.  Keep in mind that we are continuing to
work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.2.1 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
=============================
-issue#42: startTraversal does not restart the traversal at the beginning - the connector will start the traversal from the begining when the start traversal is called.
-issue#44: Make "Domain" field optional
-issue#45: Incorrect URL generation when SharePoint web service returns DefaultViewUrl for List as empty
-issue#46: Incorrect URL formation for list items when the List name is changed after creation

KNOWN ISSUES/LIMITATIONS:
=============================
1. There may be inconsistency in crawl behavior when Sharepoint List/Library contains a large number of items (e.g. more than 2000)
-------------------------------------------------------------------------------------------------------------------------


Release 1.2.0, MAY 22, 2008
==========================

Introduction
------------
This is a patch release for wide evaluation.
This patch can be deployed on the existing installation of Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.2.0 as per steps mentioned below.
Your feedback is important to us.
Keep in mind that we are continuing to work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.2.0 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
=============================
-issue#40: Out of memory error - When there are a very large number of items in a site, the connector could run out of memory

STEPS TO DEPLOY THE PATCH RELEASE ON 1.1.2/1.1.3
------------------------------------------
1. Stop the SharePoint Connector Service.
2. Open the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/lib.
3. Replace the file "connector-sharepoint.jar" with the new jar downloaded from the Code Site.
4. Delete the SharePoint connector state file (Sharepoint_state.xml) from the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/connectors/sharepoint-connector/<connector-name>
5. Start the SharePoint Connector Service.

-------------------------------------------------------------------------------------------------------------------------

Release 1.1.3, APRIL 17, 2008
==========================

Introduction
------------
This is a patch release for wide evaluation.
This patch can be deployed on the existing installation of Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.1.2 as per steps mentioned below.
Your feedback is important to us.
Keep in mind that we are continuing to work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.1.3 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
=============================
-issue#34: Support of JRE 1.5
-issue#37: Connector does not crawl linked sites if the linked sites are on different host

STEPS TO DEPLOY THE PATCH RELEASE ON 1.1.2
------------------------------------------
1. Stop the SharePoint Connector Service.
2. Open the directory $CATALINA_HOME/webapps/connector-manager/WEB-INF/lib.
3. Replace the file "connector-sharepoint.jar" with the new jar downloaded from the Code Site.
4. Start the SharePoint Connector Service.

Note: This release provides support for JRE 1.5 along with JRE 1.4. While using JRE 1.5 the Apache JDK 1.4 Compatibility Package for Apache Tomcat 5.5 should not be installed, however it is still required for JRE 1.4.
If you intend to run the SharePoint Connector with JRE 1.5 after deploying the 1.1.3 patch, the files xercesImpl.jar, xml-apis.jar located in the directory $CATALINA_HOME/common/endorsed should be deleted before starting the Sharepoint Connector service.

-------------------------------------------------------------------------------------------------------------------------


Release 1.1.2, MARCH 05, 2008
==========================

Introduction
------------
This is an early access release for wide evaluation and usage.  Your
feedback is important to us.  Keep in mind that we are continuing to
work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.1.2 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
=============================
-The java regex for include/exclude URL patterns is replaced with GNU regex implementation
-Process linked sites
-Find out dynamically the URL fragments of "lists" in MOSS.
-Connector was unable to process state file and sends same documents in consecutive batches to CM, when the Sharepoint site have had batches of documents with different last modified dates. Fixed this issue.
-Work around Microsoft Sharepoint Web service bug subsite greater than 1000


-------------------------------------------------------------------------------------------------------------------------

Release 1.1.1, JAN 08, 2008
==========================

Introduction
------------
This is an early access release for wide evaluation and usage.  Your
feedback is important to us.  Keep in mind that we are continuing to
work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.1.1 and things may change in the future.

ISSUES FIXED IN THIS RELEASE:
=============================
-Root objects (e.g. documentlibrary,wikilibrary,contacts) missing object type value
-Logging level for file handler is set to ALL. Previously it was INFO

-------------------------------------------------------------------------------------------------------------------------
Release 1.1.0, DEC 19, 2007
==========================

Introduction
------------
This is an early access release for wide evaluation and usage.  Your
feedback is important to us.  Keep in mind that we are continuing to
work on Google Enterprise Connector for Microsoft SharePoint 2003 and Microsoft SharePoint 2007 1.1.0 and things may change in the future.

Summary of Changes
------------------
1. Added support for Microsoft SharePoint 2003. The connector now supports SPS2003(SharePoint Portal Server), MOSS2007 (Microsoft Office SharePoint Server), WSS2.0 and WSS3.0 (Windows SharePoint Services).
2. The connector supports following list of entities:
[Microsoft SharePoint 2007]
- Folder - File - Document Library
- Discussion Boards - Site	- Web
- Attachment - Links - Wikipage Library
- Tasks - Calendar - Contacts
- Announcements - Issues - Alerts
- Surveys - Custom - Picture Library
- Unknown Document Type - Project Tasks
- Administrative Tasks - Report Library
- Translation Management Library
- Data Connection Library
- Slide Library - Form Library

[Microsoft SharePoint 2003]
- Folder - File - Document Library
- Discussion Boards - Site	- Web
- Attachment - Links - Tasks
- Calendar - Contacts
- Announcements - Issues - Events
- Surveys - Custom - Picture Library
- Unknown Document Type - Project Tasks
- Form Library - Alerts
3. Metadata blacklist nand whitelist has been externalized.It is now made available through connectorInstance.xml


ISSUES FIXED IN THIS RELEASE:
=============================
The MySite base URL requires to be specified without FQDN (Fully Qualified Domain Name). e.g. http://website is valid MySite URL. Where as http://website.domain.com wouldnt be crawled.


-------------------------------------------------------------------------------------------------------------------------
Release 1.0.0, OCT 10, 2007
==========================

Introduction
------------
This is an early access release for wide evaluation and usage.  Your
feedback is important to us.  Keep in mind that we are continuing to
work on Google Enterprise Connector for Microsoft SharePoint 2007 1.0.0 and things may change in the future.

Summary of Changes
------------------
1. The connector supports MOSS2007 (Microsoft Office SharePoint Server) and WSS3.0 (Windows SharePoint Services).
2. The connector supports only Metadata and URL based crawl
3. The connector supports only incremental crawl.
4. The connector supports following list of entities:
- Folder		- File
- Document Library	- Discussion Boards
- Site			- Web
- Attachment		- Links
5. The connector supports pattern based URL inclusion and exclusion in which user can specify the URL patterns to crawl and the patterns to exclude while crawling SharePoint content repository.
6. The connector supports NTLM and HTTP Basic authentication protected SharePoint repositories.
7. The connector supports crawling Personal sites (or MySites) and personal Links (or MyLinks).
8. The connector supports crawling Linked SharePoint sites.
9. The connector supports aliasing for the SharePoint crawl URL where the SharePoint server may have a different IP/name for the users from external networks and a local IP/name for the internal systems.
10. The connector has a built-in filtering on the selectively retrieving certain metadata attributes.

KNOWN ISSUES/LIMITATIONS IN THIS RELEASE:
=============================
1. The MySite base URL requires to be specified without FQDN (Fully Qualified Domain Name). e.g. http://website is valid MySite URL. Where as http://website.domain.com wouldnt be crawled.
2. The connector does not support multiple aliasing, where each site has a separate frontend server/port. The aliasing is only supported for the main site which is mentioned under Crawl URL (and sub-sites). Aliasing is not supported for MySites and other Linked Sites.

Note: The connector also packages the modified commons-httpclient.jar to give a thorough NTLM support.

Version Compatibility
---------------------
The connector is compatible with connector manager version 1.0.2.The connector supports SPS2003, MOSS 2007, WSS 2.0 and WSS 3.0.